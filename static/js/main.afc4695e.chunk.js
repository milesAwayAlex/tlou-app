(this["webpackJsonptlou-app"]=this["webpackJsonptlou-app"]||[]).push([[0],{75:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(10),i=n.n(s),r=(n(68),n(13)),l=n(121),o=n(17),d=n.n(o),u=n(28),j=n(7),p=n(14),b=n(101),m=n(102),h=n(104),f=n(107),O=n(127),x=n(108),g=n(125),y=n(109),v=n(110),S=n(123),k=n(24),C=n(111),N=n(112),w=n(77),I=n(105),T=n(106),_=n(2),E=Object(b.a)((function(e){return{root:{minHeight:"100vh"},wall:{backgroundColor:e.palette.background.default,justifyContent:"flex-start"},fixed:Object(p.a)({position:"fixed",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingInline:e.spacing(3)},e.breakpoints.down("xs"),{position:"static",height:"auto",paddingBlockEnd:e.spacing(3),paddingInline:e.spacing(2)}),grayWall:Object(p.a)({backgroundColor:e.palette.background.paper,padding:e.spacing(3),alignItems:"flex-start"},e.breakpoints.down("xs"),{backgroundColor:e.palette.background.default}),margin:{marginTop:e.spacing(2)},credits:{paddingBlock:e.spacing(3)},list:{width:"100%"},sectionHeader:{display:"flex",alignItems:"center",justifyContent:"space-around",paddingBlockStart:e.spacing(3)},pageHeader:Object(p.a)({display:"flex",alignItems:"center",justifyContent:"flex-start",paddingBlock:e.spacing(2),paddingInline:e.spacing(4)},e.breakpoints.down("sm"),{justifyContent:"center",paddingInline:0})}}));function A(e){var t,n,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=e.item._id,d=function(){e.selected.types.includes(o)?e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{types:e.selected.types.filter((function(e){return e!==o}))})):e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{types:e.selected.types.concat(o)}))},u=e.selected.types.includes(o),p=!1;if(e.item.sections){var b=e.item.sections.map((function(e){return e._id}));t=Object(_.jsx)(m.a,{children:Object(_.jsx)(h.a,{edge:"end",onClick:function(){return l(!i)},children:i?Object(_.jsx)(I.a,{}):Object(_.jsx)(T.a,{})})}),p=!(u=b.every((function(t){return e.selected.sections.includes(t)})))&&b.some((function(t){return e.selected.sections.includes(t)})),d=function(){if(u)e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{sections:e.selected.sections.filter((function(e){return!b.includes(e)}))}));else{var t=[];b.forEach((function(n){e.selected.sections.includes(n)||t.push(n)})),e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{sections:e.selected.sections.concat(t)}))}},n=Object(_.jsx)(f.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(_.jsx)("ul",{children:e.item.sections.map((function(t){return Object(_.jsx)(A,{item:t,selected:e.selected,setSelected:e.setSelected},t._id)}))})})}return e.item.articles&&(d=function(){e.selected.sections.includes(o)?e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{sections:e.selected.sections.filter((function(e){return e!==o}))})):e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{sections:e.selected.sections.concat(o)}))},u=e.selected.sections.includes(o)),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(O.a,{button:!0,onClick:function(){d()},children:[Object(_.jsx)(x.a,{children:Object(_.jsx)(g.a,{edge:"start",disableRipple:!0,tabIndex:-1,indeterminate:p,checked:u,color:"primary"})}),Object(_.jsx)(y.a,{primary:e.item.name}),t]}),n]})}function B(e){var t,n,c=E();if("types"===e.catName){n="Select by Type";var a=e.catArray.map((function(e){return e._id})).every((function(t){return e.selected.types.includes(t)}));t=Object(_.jsx)(v.a,{color:"default",fullWidth:!1,size:"medium",onClick:function(){a?e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{types:[]})):e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{types:e.catArray.map((function(e){return e._id}))}))},children:a?"Clear All":"Select All"})}"chapters"===e.catName&&(n="Select by Chapter",t=Object(_.jsx)(v.a,{color:"default",fullWidth:!1,size:"medium",onClick:function(){e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{sections:[]}))},children:"Clear All"}));var s=e.catArray.map((function(t){return Object(_.jsx)(A,{item:t,selected:e.selected,setSelected:e.setSelected},t._id)}));return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(S.a,{className:c.sectionHeader,children:[Object(_.jsx)(k.a,{component:"h2",variant:"h5",children:n}),t]}),Object(_.jsx)(C.a,{className:c.list,children:s})]})}var M=function(e){var t=Object(c.useState)({}),n=Object(r.a)(t,2),a=n[0],s=n[1],i=e.selected.game,l=e.api;Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(l+"/select",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({game:i})});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,s(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l,i]);var o=E(),p=function(){var t=Object(u.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(l+"/next",{method:"POST",headers:{"Content-Type":"application/json"},body:"[]"});case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{sections:[c._id]})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),b=Object(_.jsx)(k.a,{component:"h2",children:"Loading.."});if(a)for(var m in b=[],a)Object.hasOwnProperty.call(a,m)&&b.push(Object(_.jsx)(B,{catName:m,catArray:a[m],selected:e.selected,setSelected:e.setSelected},m));return Object(_.jsxs)(N.a,{container:!0,component:"main",alignItems:"stretch",className:o.root,children:[Object(_.jsxs)(N.a,{container:!0,item:!0,xs:12,sm:8,md:9,component:w.a,square:!0,className:o.grayWall,children:[Object(_.jsx)(N.a,{item:!0,xs:12,className:o.pageHeader,children:Object(_.jsx)(k.a,{component:"h1",variant:"h3",children:e.selected.game})}),Object(_.jsx)(N.a,{item:!0,xs:12,md:6,children:b[0]}),Object(_.jsx)(N.a,{item:!0,xs:12,md:6,children:b[1]})]}),Object(_.jsx)(N.a,{container:!0,direction:"column",item:!0,xs:12,sm:4,md:3,className:o.wall,children:Object(_.jsxs)(S.a,{className:o.fixed,children:[Object(_.jsx)(S.a,{}),Object(_.jsxs)(S.a,{children:[Object(_.jsx)(v.a,{className:o.margin,onClick:function(){e.setScreen("home")},children:"Main Menu"}),Object(_.jsx)(v.a,{className:o.margin,onClick:function(){e.selected.types.length?(e.selected.sections.length||p(),e.setScreen("main")):e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{types:a.types.map((function(e){return e._id}))}))},children:"Start"}),Object(_.jsx)(v.a,{className:o.margin,onClick:function(){localStorage.removeItem("collected")},children:"Reset Collected"})]}),Object(_.jsx)(S.a,{className:o.credits,children:e.credits})]})})]})},H=Object(b.a)((function(e){return{root:{minHeight:"100vh"},wall:{backgroundColor:e.palette.background.default,padding:e.spacing(3),justifyContent:"space-between"},grayWall:Object(p.a)({backgroundColor:e.palette.background.paper},e.breakpoints.down("xs"),{backgroundColor:e.palette.background.default}),margin:Object(p.a)({marginTop:e.spacing(2)},e.breakpoints.down("xs"),{marginTop:0,marginBlockEnd:e.spacing(2)})}}));var J=function(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],s=n[1];Object(c.useEffect)((function(){var t=!0,n=e.api;function c(){return(c=Object(u.a)(d.a.mark((function e(){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n+"/games");case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,t&&s(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return function(){c.apply(this,arguments)}(),function(){t=!1}}),[e.api]);var i=H(),l=Object(_.jsx)(k.a,{component:"p",variant:"h2",children:"Loading.."});return a&&(l=a.map((function(t){return Object(_.jsx)(v.a,{className:i.margin,onClick:function(){e.setScreen("select"),e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{game:t}))},children:"Start"},t)})),e.selected.sections.length&&e.selected.types.length&&l.push(Object(_.jsx)(v.a,{className:i.margin,onClick:function(){e.setScreen("main")},children:"Resume"},"displayStored"))),Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(N.a,{container:!0,component:"main",alignItems:"stretch",className:i.root,children:[Object(_.jsxs)(N.a,{container:!0,direction:"column",item:!0,xs:12,sm:7,component:w.a,square:!0,className:i.grayWall,children:[Object(_.jsx)(k.a,{component:"h1",variant:"h3",children:"The Last of Us"}),Object(_.jsx)(k.a,{component:"h2",variant:"h5",children:"Collectible App"})]}),Object(_.jsxs)(N.a,{container:!0,direction:"column",item:!0,xs:12,sm:5,className:i.wall,children:[Object(_.jsx)(S.a,{}),Object(_.jsx)(S.a,{children:l}),Object(_.jsx)(S.a,{className:i.margin,children:e.credits})]})]})})},P=n(48),W=n(113),F=n(114),D=n(115),L=n(126),R=n(116),z=n(124),q=n(118),G=n(117),U=Object(b.a)((function(e){return{root:{minHeight:"100vh"},fab:{position:"fixed",color:e.palette.primary.dark,backgroundColor:e.palette.grey[900],bottom:e.spacing(2),right:e.spacing(2)},bottomDrawer:{width:"auto"},wall:{backgroundColor:e.palette.background.default,justifyContent:"flex-start"},fixed:{position:"fixed",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingInline:e.spacing(3)},credits:{paddingBlock:e.spacing(3)},grayWall:{backgroundColor:e.palette.background.default,padding:e.spacing(3),alignItems:"flex-start"},margin:{marginTop:e.spacing(2)},card:{marginBlockStart:e.spacing(1),width:"100%"},sectionHeader:{display:"flex",alignItems:"center",justifyContent:"flex-start",paddingBlock:e.spacing(2),paddingInline:e.spacing(1),marginBlockStart:e.spacing(1),width:"100%"}}}));function K(e){var t=U(),n=e.collected.includes(e.item._id);return Object(_.jsxs)(W.a,{className:t.card,children:[Object(_.jsx)(F.a,{title:e.item.name||e.item.type,subheader:e.item.name?e.item.type:"",titleTypographyProps:{variant:"h6",color:n?"textSecondary":"textPrimary"},action:Object(_.jsx)(h.a,{children:Object(_.jsx)(g.a,{color:"primary",checked:n,disableRipple:!0,tabIndex:-1})}),onClick:function(){n?e.setCollected(e.collected.filter((function(t){return t!==e.item._id}))):e.setCollected(e.collected.concat(e.item._id))}}),Object(_.jsx)(f.a,{in:!n,timeout:"auto",unmountOnExit:!0,children:Object(_.jsx)(D.a,{children:Object(_.jsx)(k.a,{children:e.item.description})})})]})}var Q=function(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),l=Object(r.a)(i,2),o=l[0],p=l[1],b=Object(c.useState)([]),m=Object(r.a)(b,2),h=m[0],f=m[1],x=e.api,g=U();Object(c.useEffect)((function(){var e=localStorage.getItem("collected");f(e?JSON.parse(e):[])}),[]),Object(c.useEffect)((function(){localStorage.setItem("collected",JSON.stringify(h))}),[h]),Object(c.useEffect)((function(){function t(){return(t=Object(u.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(x+"/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.selected)});case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,s(c),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[x,e.selected]);var I=function(){var e=a.flatMap((function(e){return e.articles.map((function(e){return e._id}))}));f(h.filter((function(t){return!e.includes(t)})))},T=function(){var t=Object(u.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(x+"/next",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a[a.length-1])});case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,s([]),e.setSelected(Object(j.a)(Object(j.a)({},e.selected),{},{sections:[c._id]})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),E="Loading..";if(a){E=[];var A,B=Object(P.a)(a);try{for(B.s();!(A=B.n()).done;){var M=A.value;E.push(Object(_.jsx)(S.a,{className:g.sectionHeader,children:Object(_.jsxs)(k.a,{component:"h2",variant:"h6",children:[M.chapter," - ",M.name]})},M._id)),M.articles.length||E.push(Object(_.jsx)(S.a,{className:g.sectionHeader,children:Object(_.jsx)(k.a,{component:"p",variant:"subtitle1",children:"No items to display"})},M.name));var H,J=Object(P.a)(M.articles);try{for(J.s();!(H=J.n()).done;){var W=H.value;E.push(Object(_.jsx)(K,{item:W,collected:h,setCollected:f},W._id))}}catch(F){J.e(F)}finally{J.f()}}}catch(F){B.e(F)}finally{B.f()}E.push(Object(_.jsx)(v.a,{className:g.margin,color:"default",onClick:function(){return T()},children:"Next Section"},"next"))}return Object(_.jsxs)(N.a,{container:!0,component:"main",alignItems:"stretch",className:g.root,children:[Object(_.jsx)(N.a,{container:!0,item:!0,xs:12,sm:8,md:9,component:w.a,square:!0,className:g.grayWall,direction:"column",children:E}),Object(_.jsx)(L.a,{xsDown:!0,children:Object(_.jsx)(N.a,{container:!0,direction:"column",item:!0,sm:4,md:3,className:g.wall,children:Object(_.jsxs)(S.a,{className:g.fixed,children:[Object(_.jsx)(S.a,{}),Object(_.jsxs)(S.a,{children:[Object(_.jsx)(v.a,{className:g.margin,onClick:function(){return e.setScreen("home")},children:"Main Menu"}),Object(_.jsx)(v.a,{className:g.margin,onClick:function(){return e.setScreen("select")},children:"Game Menu"}),Object(_.jsx)(v.a,{className:g.margin,onClick:function(){return I()},children:"Reset Collected"})]}),Object(_.jsx)(S.a,{className:g.credits,children:e.credits})]})})}),Object(_.jsxs)(L.a,{smUp:!0,implementation:"css",children:[Object(_.jsx)(R.a,{className:g.fab,onClick:function(){return p(!0)},children:Object(_.jsx)(G.a,{fontSize:"large"})}),Object(_.jsx)(z.a,{anchor:"bottom",open:o,onClose:function(){return p(!1)},children:Object(_.jsxs)(C.a,{className:g.bottomDrawer,children:[Object(_.jsx)(O.a,{button:!0,onClick:function(){return e.setScreen("home")},children:Object(_.jsx)(y.a,{primary:"Main Menu"})}),Object(_.jsx)(O.a,{button:!0,onClick:function(){return e.setScreen("select")},children:Object(_.jsx)(y.a,{primary:"Game Menu"})}),Object(_.jsx)(q.a,{}),Object(_.jsx)(O.a,{button:!0,onClick:function(){I(),p(!1)},children:Object(_.jsx)(y.a,{primary:"Reset Displayed Collected"})})]})})]})]})},V=n(56),X=n(120),Y=n(122),Z=n(119);var $=function(){var e=Object(c.useState)("home"),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)({game:"",sections:[],types:[]}),i=Object(r.a)(s,2),o=i[0],d=i[1],u="https://calm-headland-01615.herokuapp.com/api",j=Object(V.a)({palette:{type:"dark",primary:Z.a},props:{MuiGrid:{alignItems:"center",justify:"center"},MuiButton:{variant:"outlined",size:"large",fullWidth:!0,disableElevation:!0,color:"primary"}}});Object(c.useEffect)((function(){var e=localStorage.getItem("selected");e&&d(JSON.parse(e))}),[]),Object(c.useEffect)((function(){localStorage.setItem("selected",JSON.stringify(o))}),[n,o]);var p=Object(_.jsxs)(k.a,{component:"p",variant:"subtitle2",color:"textSecondary",align:"center",children:["by"," ",Object(_.jsx)(X.a,{color:"textSecondary",underline:"always",href:"https://github.com/milesAwayAlex",children:"@milesAwayAlex"})]}),b=Object(_.jsx)(k.a,{component:"h1",children:" Loading.."});return"home"===n?b=Object(_.jsx)(J,{setScreen:a,selected:o,setSelected:d,api:u,credits:p}):"select"===n?b=Object(_.jsx)(M,{setScreen:a,selected:o,setSelected:d,api:u,credits:p}):"main"===n&&(b=Object(_.jsx)(Q,{setScreen:a,selected:o,setSelected:d,api:u,credits:p})),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(l.a,{}),Object(_.jsx)(Y.a,{theme:j,children:b})]})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,129)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)($,{})}),document.getElementById("root")),ee()}},[[75,1,2]]]);
//# sourceMappingURL=main.afc4695e.chunk.js.map